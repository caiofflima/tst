<form [formGroup]="form" #formDirective="ngForm" style="min-width: 48em">
  <div class="form-container">
    <div class="form-row">
      <div class="form-field-full">
        <asc-select-patologia
          selectId="patologia"
          (dadoSelecionado)="patologiaSelecionado($event)"
          [control]="form.get('idPatologia')"
          [parametro]="parametroSelectPatologia"
          formControlName="idPatologia"
          id="patologiaPrgMed"
          label="Patologia"
          [required]="true"
          style="border-left: none !important"
        ></asc-select-patologia>
      </div>
    </div>

    <!-- Linha 1: Laboratório (1/2), Quantidade Solicitada (1/2) -->
    <div class="form-row">
      <div
        *ngIf="mostrarCampo('idLaboratorio')"
        class="form-field-half"
      >
        <asc-select-laboratorio
          selectId="laboratorio"
          (dadoSelecionado)="laboratorioSelecionado($event)"
          (dadosBackend)="onLaboratoriosLoaded($event)"
          [control]="form.get('idLaboratorio')"
          [parametros]="patologia"
          formControlName="idLaboratorio"
          label="Laboratório"
          [required]="true"
          style="border-left: none !important"
        ></asc-select-laboratorio>
      </div>

      <div
        *ngIf="mostrarCampo('qtdSolicitada')"
        class="form-field-half"
      >
        <asc-input-text
          [control]="form.get('qtdSolicitada')"
          [maxlength]="3"
          inputId="qtdSolicitada"
          [somenteNumeros]="true"
          label="Quantidade solicitada"
          [required]="true"
        >
          <asc-input-error
            [msgErro]="bundle('MA012')"
            nomeErro="min"
          ></asc-input-error>
        </asc-input-text>
      </div>
    </div>

    <!-- Linha 2: Medicamento (1/2), Dias Atendidos (1/2) -->
    <div class="form-row">
      <div
        *ngIf="mostrarCampo('codigoMedicamento')"
        class="form-field-half"
      >
        <asc-select-medicamento
          selectId="medicamento"
          (dadoSelecionado)="medicamentoSelecionado($event)"
          (dadosBackend)="onMedicamentosLoaded($event)"
          [control]="form.get('codigoMedicamento')"
          [parametros]="medicamentoParam"
          formControlName="codigoMedicamento"
          label="Medicamento"
          [required]="true"
          style="border-left: none !important"
        ></asc-select-medicamento>
      </div>

      <div
        *ngIf="mostrarCampo('diasAtendidosPelaQuantidade')"
        class="form-field-half"
      >
        <asc-input-text
          [control]="form.get('diasAtendidosPelaQuantidade')"
          [maxlength]="3"
          inputId="diasAtendidosPelaQuantidade"
          [somenteNumeros]="true"
          label="Dias atendidos pela quantidade"
          [required]="true"
        >
          <asc-input-error
            [msgErro]="bundle('MA078')"
            nomeErro="min"
          ></asc-input-error>
        </asc-input-text>
      </div>
    </div>

    <!-- Linha 3: Apresentação (1/2), Valor Unitário Pago (1/2) -->
    <div class="form-row">
      <div
        *ngIf="mostrarCampo('idMedicamento')"
        class="form-field-half"
      >
        <asc-select-medicamento-apresentacao
          selectId="apresentacaoMedicamento"
          (dadoSelecionado)="medicamentoApresentacaoSelecionado($event)"
          (dadosBackend)="onApresentacoesLoaded($event)"
          [control]="form.get('idMedicamento')"
          [parametros]="medicamentoApresentacaoParam"
          formControlName="idMedicamento"
          label="Apresentação"
          [required]="true"
          style="border-left: none !important"
        ></asc-select-medicamento-apresentacao>
      </div>

      <div
        *ngIf="mostrarCampo('valorUnitarioPago')"
        class="form-field-half"
      >
        <asc-input-money-type
          [control]="form.get('valorUnitarioPago')"
          inputId="valorUnitarioPago"
          label="Valor unitário pago"
          [required]="true"
        >
          <asc-input-error
            [msgErro]="'O Valor Unitário Pago deve ser maior do que 0 (zero).'"
            nomeErro="min"
          ></asc-input-error>
        </asc-input-money-type>
        <div class="error-form" *ngIf="erroValorDocumentoFiscal">
          {{ bundle('MA083') }}
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isToShowForm && enableAllAction" class="flex-end">
    <asc-button-secondary
      buttonId="adicionarProcedimento"
      [title]="isEditing ? 'Concluir alteração' : 'Adicionar'"
      [showProgress]="loading"
      [disabled]="form?.invalid || loading"
      (onClick)="adicionarProcedimento(formDirective, $event)"
      style="margin-right: 8px;"
    ></asc-button-secondary>

    <asc-button-primary
      buttonId="limpar"
      [title]="isEditing ? 'Cancelar' : 'Limpar'"
      (onClick)="clickButtonCancelarProcedimento(formDirective, $event)"
    ></asc-button-primary>
  </div>
</form>
