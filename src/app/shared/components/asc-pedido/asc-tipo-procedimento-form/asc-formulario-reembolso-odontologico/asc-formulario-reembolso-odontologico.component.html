<form [formGroup]="form" #formDirective="ngForm" style="min-width: 48em">
  <div class="ui-g" style="width: 100% !important">
    <div class="ui-g-12 no-padding-left no-padding-right relative">
      <asc-select-procedimento
        selectId="procedimento"
        [parametros]="parametroSelectProcedimento"
        [tipoAcaoService]="CONSULTAR_PROCEDIMENTO_POR_TIPO_PROCESSO"
        [control]="form.get('idProcedimento')"
        (dadoSelecionado)="procedimentoSelecionado($event)"
        formControlName="idProcedimento"
        [label]="'Procedimento'"
        style="border-left: none !important"
        [required]="true"
      >
      </asc-select-procedimento>
    </div>
  </div>

  <div class="ui-g">
    <!-- Início da Colunas da esquerda  -->
    <div class="ui-g-12 ui-md-6 no-padding-left">
      <!-- Inicio Autorização Previa -->
      <div
        class="ui-g-12 ui-md-12 custom-form-grid no-padding-left"
        *ngIf="mostrarCampo('idAutorizacaoPrevia')"
      >
        <label
          class="control-label"
          [class.obrigatorio]="autorizacaoPreviaObrigatorio"
          >Autorização Prévia
          <small *ngIf="!autorizacaoPreviaObrigatorio">Opcional</small></label
        >
        <div *ngIf="escolherCampoAutorizacaoPrevia == 0; else naoWeb">
          <asc-select-autorizacao-previa
            selectId="autorizacaoPrevia"
            [parametros]="autorizacaoPreviaParams"
            [control]="form.get('idAutorizacaoPrevia')"
            (dadoSelecionado)="autorizacaoPreviaSelecionado($event)"
            (dadosBackend)="autorizacoesPreviasSelecionados($event)"
            formControlName="idAutorizacaoPrevia"
            label=""
            style="border-left: none !important"
          >
          </asc-select-autorizacao-previa>
        </div>
        <ng-template #naoWeb>
          <asc-dropdown
            (selected)="autorizacaoPreviaNaoWebSelecionada($event)"
            [items]="autorizacoesPrevia"
            [control]="form.get('idAutorizacaoProcedimento')"
          ></asc-dropdown>
        </ng-template>
      </div>
      <!-- Fim Autorização Previa -->

      <!-- INICIO Região odontológica -->
      <div
        class="ui-g-12 ui-md-12 custom-form-grid no-padding-left"
        *ngIf="hasProcedimento()"
      >
        <asc-graus-procedimento
          selectId="regiaoOdontologica"
          [parametros]="parametrosSelectGrauProcedimento"
          [control]="form.get('idRegiaoOdontologica')"
          (dadosBackend)="regiaoOdontologicaSelecionados($event)"
          (dadoSelecionado)="regiaoOdontologicaSelecionada($event)"
          formControlName="idRegiaoOdontologica"
          style="border-left: none !important"
          label="Região odontológica"
          [required]="true"
        ></asc-graus-procedimento>
      </div>
      <!-- FIM Região odontológica -->
      <!-- INICIO Quantidade -->
      <div
        class="ui-g-12 ui-md-12 custom-form-grid no-padding-left"
        *ngIf="mostrarCampo('qtdSolicitada')"
      >
        <asc-input-text
          [control]="form.get('qtdSolicitada')"
          [maxlength]="3"
          inputId="qtdSolicitada"
          [somenteNumeros]="true"
          label="Quantidade solicitada"
          [required]="true"
        >
          <asc-input-error
            nomeErro="min"
            [msgErro]="bundle('MA012')"
          ></asc-input-error>
          <asc-input-error
            nomeErro="max"
            [msgErro]="bundle('MA132')"
          ></asc-input-error>
        </asc-input-text>
      </div>
      <!-- FIM  Quantidade -->
    </div>
    <!-- Fim da Colunas da esquerda  -->

    <!-- Início da Colunas da direita  -->
    <div class="ui-g-12 ui-md-6">
      <div
        class="ui-g-12 ui-md-12 custom-form-grid no-padding-right"
        *ngIf="mostrarCampo('valorUnitarioPago')"
      >
        <asc-input-money-type
          [control]="form.get('valorUnitarioPago')"
          inputId="valorUnitarioPago"
          label="Valor unitário pago"
          [required]="true"
        >
          <asc-input-error
            [msgErro]="'O Valor Unitário Pago deve ser maior do que 0 (zero).'"
            nomeErro="min"
          >
          </asc-input-error>
        </asc-input-money-type>
        <div class="error-form" *ngIf="erroValorDocumentoFiscal">
          {{ bundle("MA083") }}
        </div>
      </div>

      <div
        class="ui-g-12 ui-md-12 custom-form-grid no-padding-right"
        *ngIf="mostrarCampo('dataAtendimento')"
      >
        <asc-input-date
          [control]="form.get('dataAtendimento')"
          inputId="dataAtendimento"
          label="Data do atendimento"
          [required]="true"
        >
          <asc-input-error
            [msgErro]="
              'Data do atendimento deve ser menor ou igual à Data atual.'
            "
            nomeErro="dataAtualMenor"
          >
          </asc-input-error>
        </asc-input-date>
      </div>
    </div>
  </div>

  <div *ngIf="isToShowForm && enableAllAction" style="text-align: right">
    <button
      (click)="adicionarProcedimento(formDirective, $event)"
      [disabled]="form?.invalid || loading"
      class="custom-btn-confirm"
      id="adicionarProcedimento"
    >
      <span *ngIf="loading" style="height: 1.6em; width: 4em">
        <dsc-progress-spinner
          [style]="{ width: '25px', height: '25px' }"
          animationDuration=".5s"
          fill="#EEEEEE"
          strokeWidth="4"
        >
        </dsc-progress-spinner>
      </span>
      <span *ngIf="!loading" class="span-btn">{{
        isEditing ? "Concluir alteração" : "Adicionar"
      }}</span>
    </button>

    <asc-button-primary
      buttonId="limpar"
      [title]="isEditing ? 'Cancelar' : 'Limpar'"
      (onClick)="clickButtonCancelarProcedimento(formDirective, $event)"
    ></asc-button-primary>
  </div>
</form>
