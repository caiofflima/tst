<div class="breadcrumb-container">
  <ul class="breadcrumb">
    <li>
      <a routerLink="/home">Início</a>
      <i class="fa fa-angle-right" aria-hidden="true"></i>
    </li>
    <li>
      Administração
      <i class="fa fa-angle-right" aria-hidden="true"></i>
    </li>
    <li>
      <a routerLink="/manutencao/consulta/pedidos">Consultar Pedidos</a>
    </li>
  </ul>
</div>

<div class="page-container">
  <dsc-card>
    <div class="page-header">
      <h1 class="page-title">Consultar Pedidos</h1>
    </div>

    <form [formGroup]="formulario" class="search-form">
      <!-- Dados dos Pedidos -->
      <div class="section-container">
        <h2 class="section-title">Dados dos Pedidos</h2>
        
        <div class="form-grid">
          <div class="form-field form-field--small">
            <asc-input-text
              inputId="numeroProcesso"
              label="Pedido"
              [control]="formulario.get('idPedido')"
              [maxlength]="8"
              [somenteNumeros]="true"
              placeholder="Digite o número"
              hint="Buscar um pedido específico"
            ></asc-input-text>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Tipo de Pedido"
              [options]="optionsTipoProcesso"
              [formControl]="$any(formulario.get('tiposProcesso'))"
              [multiple]="true"
              [showFilter]="true"
              placeholder="Selecione os tipos"
            ></dsc-select>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Situação do Pedido"
              [options]="optionsSituacaoProcesso"
              [formControl]="$any(formulario.get('situacoesProcesso'))"
              [multiple]="true"
              [showFilter]="true"
              placeholder="Selecione as situações"
            ></dsc-select>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Condição do Pedido"
              [options]="optionsCondicaoProcesso"
              [formControl]="$any(formulario.get('condicaoProcesso'))"
              [showFilter]="true"
              [placeholder]="bundle('MHSPH')"
            ></dsc-select>
          </div>

          <div class="form-field form-field--small">
            <dsc-select
              label="UF"
              [options]="optionsUF"
              [formControl]="$any(formulario.get('ufsProcesso'))"
              [multiple]="true"
              [showFilter]="true"
              placeholder="Selecione as UFs"
            ></dsc-select>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Agrupadora"
              [options]="optionsFilial"
              [formControl]="$any(formulario.get('filiaisProcesso'))"
              [multiple]="true"
              [showFilter]="true"
              placeholder="Selecione as filiais"
            ></dsc-select>
          </div>

          <div class="form-field form-field--small">
            <dsc-select
              label="UF de Atendimento"
              [options]="optionsUF"
              [formControl]="$any(formulario.get('ufAtendimento'))"
              [showFilter]="true"
              [placeholder]="bundle('MHSPH')"
              (selectionChange)="onChangeUFAtendimento()"
            ></dsc-select>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Município de Atendimento"
              [options]="optionsMunicipio"
              [formControl]="$any(formulario.get('municipioAtendimento'))"
              [showFilter]="true"
              [placeholder]="bundle('MHSPH')"
            ></dsc-select>
          </div>
        </div>
      </div>

      <!-- Dados do Titular/Beneficiários -->
      <div class="section-container">
        <h2 class="section-title">Dados do Titular/Beneficiários</h2>
        
        <div class="form-grid">
          <div class="form-field form-field--medium">
            <dsc-select
              label="Tipo de Beneficiário"
              [options]="optionsTipoBeneficiario"
              [formControl]="$any(formulario.get('tiposBeneficiario'))"
              [multiple]="true"
              [showFilter]="true"
              placeholder="Selecione os tipos"
            ></dsc-select>
          </div>

          <div class="form-field form-field--small">
            <asc-input-text
              inputId="matriculaTitular"
              label="Matrícula do Titular"
              [control]="formulario.get('matriculaTitular')"
              maskName="matriculaMaskDisk"
              placeholder="000000-0"
              hint="Filtrar pela matrícula do titular"
            ></asc-input-text>
          </div>

          <div class="form-field form-field--small">
            <asc-input-text
              inputId="codigoBeneficiario"
              label="Código do Beneficiário"
              [control]="formulario.get('codigoBeneficiario')"
              [maxlength]="12"
              placeholder="Digite o código"
              hint="Filtrar pelo cartão de identificação do beneficiário"
            ></asc-input-text>
          </div>

          <div class="form-field form-field--large">
            <asc-input-text
              inputId="nomeBeneficiario"
              label="Nome do Beneficiário"
              [control]="formulario.get('nomeBeneficiario')"
              somenteLetrasMaiusculas="true"
              placeholder="Digite o nome"
              hint="Filtrar pelo nome do beneficiário"
            ></asc-input-text>
          </div>

          <div class="form-field form-field--medium">
            <dsc-select
              label="Caráter da Solicitação"
              [options]="optionsCaraterSolicitacao"
              [formControl]="$any(formulario.get('caraterSolicitacao'))"
              [showFilter]="true"
              [placeholder]="bundle('MHSPH')"
            ></dsc-select>
          </div>

          <div class="form-field form-field--small">
            <asc-input-text
              inputId="matriculaUltimoUsuario"
              label="Último Usuário"
              [control]="formulario.get('matriculaUltimoUsuario')"
              maskName="codigoUsuarioMask"
              placeholder="A000000"
              hint="Filtrar por usuário que atualizou o pedido mais recentemente"
            ></asc-input-text>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <dsc-button
          variant="secondary"
          (click)="limparCampos()"
        >
          <span class="fa fa-trash fa-fw button-icon"></span>
          Limpar Campos
        </dsc-button>
        <dsc-button
          variant="primary"
          (click)="consultarProcesso()"
        >
          <span class="fa fa-search fa-fw button-icon"></span>
          Pesquisar Pedidos
        </dsc-button>
      </div>
    </form>
  </dsc-card>
</div>
