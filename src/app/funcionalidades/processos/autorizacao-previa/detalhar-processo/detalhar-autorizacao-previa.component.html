<p-tabView>
  <!-- ----- DADOS ----- -->
  <p-tabPanel header="Dados">
    <asc-vis-dados-beneficiario [beneficiario]="beneficiario"></asc-vis-dados-beneficiario>
  </p-tabPanel>

  <!-- ----- PROCEDIMENTOS ----- -->
  <p-tabPanel header="Procedimentos">
    <div class="row col-md-12">
      <h4>Procedimentos do Pedido</h4>
    </div>

    <div class="row col-md-12 coluna-interna">
      <div class="row col-md-12">
        <p-table [value]="listaPedidosProcedimento" [paginator]="true" [rows]="10"
                     class="table table-striped table-sm table-hover" emptyMessage=" ">
          <!-- <p-column header="Procedimento"> -->
            <ng-template let-obj="rowData" pTemplate="content">
              {{obj.procedimento.estruturaNumerica | estruturaProcedimento }}
              - {{obj.procedimento.descricaoProcedimento}}
            </ng-template>
          <!-- </p-column> -->
          <!-- <p-column field="grauProcedimento.nome"> -->
            <ng-template pTemplate="header">
              <span *ngIf="!isAutorizacaoODT()">Grau</span>
              <span *ngIf="isAutorizacaoODT()">Região Odontológica</span>
            </ng-template>
          <!-- </p-column> -->
          <!-- <p-column field="qtdSolicitada" header="Quantidade"></p-column> -->
          <!-- <p-column header="Ação"> -->
            <ng-template let-obj="rowData" pTemplate="content">
              <button (click)="modalValidarProcedimentos.show(obj, hasAcaoAnalise())"
                      *ngIf="!obj.validado && hasAcaoAnalise()" class="btn btn-primary"
                      id="btnAutorizarProcedimento" title="Autorizar Procedimento">
                <span class="fa fa-user-md fa-fw"></span>
              </button>
              <button (click)="modalValidarProcedimentos.show(obj)" *ngIf="obj.validado || !hasAcaoAnalise()"
                      class="btn btn-primary"
                      id="btnVisualizarAutorizacao" title="Visualizar Autorização">
                <span class="fa fa-search fa-fw"></span>
              </button>
            </ng-template>
          <!-- </p-column> -->
        </p-table>
      </div>
    </div>
  </p-tabPanel>

  <!-- ----- PROFISSIONAL ----- -->
  <p-tabPanel header="Profissional">
    <asc-profissional-executante
      #profissionalExecutante [form]="form" [novo]="false"
      [pedido]="pedido"
      [permissoesProcesso]="permissoesProcesso"
    ></asc-profissional-executante>
  </p-tabPanel>

  <!-- ----- DOCUMENTOS ----- -->
  <p-tabPanel header="Documentos">
    <asc-relacao-documentos-upload
      #relacaoDocumentosUpload (onSuccess)="atualizarSucessoUpload($event)"
      [pedido]="pedido"
      [permissoesProcesso]="permissoesProcesso"
    ></asc-relacao-documentos-upload>
  </p-tabPanel>

  <!-- ----- ANEXOS ----- -->
  <p-tabPanel header="Anexos">
    <asc-anexos-pedido #anexosPedido [pedido]="pedido" [permissoesProcesso]="permissoesProcesso"
    ></asc-anexos-pedido>
  </p-tabPanel>

  <!-- ----- HISTORICO ----- -->
  <p-tabPanel header="Histórico">
    <asc-historico-processo
      #historicoProcesso [pedido]="pedido"
      [permissoesProcesso]="permissoesProcesso"
    ></asc-historico-processo>
  </p-tabPanel>

  <!-- ----- GERAL ----- -->
  <p-tabPanel header="Geral">
    <asc-dados-gerais
      [form]="form" [itensCaracteresSolicitacao]="itensCaracteresSolicitacao" [pedido]="pedido"
      [permissoesProcesso]="permissoesProcesso"
    ></asc-dados-gerais>
  </p-tabPanel>

  <!-- ----- MENSAGENS ----- -->
  <p-tabPanel header="Mensagens">
    <asc-mensagens-enviadas #mensagensEnviadas [pedido]="pedido"></asc-mensagens-enviadas>
  </p-tabPanel>

  <!-- ----- SITUACAO ----- -->
  <p-tabPanel #tabSituacaoProcesso header="Situação" headerStyleClass="tabPanelDestaque">
    <asc-atualizar-situacao-processo
      #atualizarSituacaoProcesso
      (onSuccess)="atualizarInformacoesMudancaSituacao($event)"
      [pedido]="pedido"
      [permissoesProcesso]="permissoesProcesso"
    ></asc-atualizar-situacao-processo>
  </p-tabPanel>
</p-tabView>

<div class="row col-xs-12">
  <div class="clearfix fim-tab"></div>
</div>

<div class="col-xs-12 barra-botoes">
  <button (click)="cancelarPedido()" *ngIf="podeCancelar()" class="btn btn-danger">
    <span class="fa fa-close fa-fw"></span>Cancelar Pedido
  </button>
  <button (click)="liberarProcessoParaAnalise()" *ngIf="hasLiberarProcessoParaAnalise()" class="btn btn-success">
    <span class="fa fa-save fa-fw"></span>Liberar Processo para Análise
  </button>
  <button (click)="salvarProcesso()" *ngIf="hasAcaoEdicao()" class="btn btn-primary">
    <span class="fa fa-save fa-fw"></span>Salvar Pedido
  </button>
  <button (click)="restaurarCamposPedido()" *ngIf="hasAcaoEdicao()" class="btn btn-primary">
    <span class="fa fa-keyboard-o fa-fw"></span>Restaurar Campos
  </button>
  <button (click)="analisarProcessos()" *ngIf="hasAcaoAnalise()" class="btn btn-primary">
    <span class="fa fa-check fa-fw"></span>Analisar Documentação
  </button>
  <button (click)="novoProcedimento()" *ngIf="hasAcaoEdicao()" class="btn btn-info">
    <span class="fa fa-edit fa-fw"></span>Editar Procedimentos
  </button>
  <button (click)="voltarProcessos()" class="btn btn-info">
    <span class="fa fa-reply fa-fw"></span>Voltar
  </button>
</div>
<asc-validar-procedimentos
  #modalValidarProcedimentos
  (onUpdate)="atualizarPedidosProcedimento()"
></asc-validar-procedimentos>
