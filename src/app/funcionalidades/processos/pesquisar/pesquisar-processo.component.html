<div *ngIf="carregandoConsulta" class="loading-container">
  <div class="spinner"></div>
  <p class="loading-text">Carregando consulta ...</p>
</div>
<div class="container" *ngIf="!carregandoConsulta">
  <div class="col-md-12 breadcrumb-header">
    <ul class="breadcrumb">
      <li>
        <span (click)="voltar()" class="voltar"
          ><i class="fa fa-arrow-left" aria-hidden="true"></i>Voltar</span
        >
      </li>
      <a routerLink="/home">Início</a>
      <em class="fa fa-chevron-right"></em>
      Administração
      <em class="fa fa-chevron-right"></em>
      Consultar Pedidos
    </ul>
  </div>
  <div class="title-type">
    <h1 class="titulo-pagina">Consultar pedidos</h1>
  </div>

  <div class="main-section">
    <form [formGroup]="formulario" name="form">
      <p class="info-search-label">Dados do pedido</p>
      <div class="row">
        <div class="col-md-3">
          <asc-input-text
            [control]="formulario.get('idPedido')"
            inputId="numeroProcesso"
            label="Pedido"
            [maxlength]="8"
            hint="Buscar um processo específico"
            size="large"
          ></asc-input-text>
        </div>

        <div class="col-md-3">
          <asc-dropdown
            formControlName="condicaoProcesso"
            label="Condição do pedido"
            [items]="optionsCondicaoProcesso"
            [placeholder]="this.bundle('MHSPH')"
            size="large"
          ></asc-dropdown>
        </div>

        <div class="col-md-3">
          <asc-multiSelect
            id="uf"
            label="UF"
            [options]="listComboUF"
            [control]="formulario.get('ufsProcesso')"
            [selected]="ufsProcessoSelected"
            size="large"
          ></asc-multiSelect>
        </div>

        <div class="col-md-3">
          <asc-multiSelect
            id="filial"
            label="Agrupadora"
            [options]="listComboFilial"
            [control]="formulario.get('filiaisProcesso')"
            [selected]="filiaisProcessoSelected"
            size="large"
          ></asc-multiSelect>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <asc-multiSelect
            id="tipoProcesso"
            label="Tipo de pedido"
            [options]="listComboTipoProcesso"
            (onChange)="onChangeTipoProcesso()"
            [control]="formulario.get('tiposProcesso')"
            [selected]="tiposProcessoSelected"
            size="large"
          ></asc-multiSelect>
        </div>

        <div class="col-md-3">
          <asc-select-uf
            id="asc-select-uf-pesquisar-processo"
            label="UF de atendimento"
            [control]="formulario.get('ufAtendimento')"
            size="large"
          ></asc-select-uf>
        </div>

        <div class="col-md-3">
          <asc-select-municipio
            id="asc-select-municipio-pesquisar-processo"
            label="Município de atendimento"
            [parametro]="{ idMunicipio: ufAtendimentoId }"
            [control]="formulario.get('municipioAtendimento')"
            size="large"
          ></asc-select-municipio>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <asc-multiSelect
            id="situacaoProcesso"
            label="Situação do pedido"
            [options]="listComboSituacaoProcesso"
            [control]="formulario.get('situacoesProcesso')"
            [selected]="situacoesProcessoSelected"
            size="large"
          ></asc-multiSelect>
        </div>

        <div class="col-md-3">
          <asc-input-text
            [control]="formulario.get('autorizacaoPreviaGstao')"
            inputId="autorizacaoPrevia"
            label="Autorização SIAGS"
            [maxlength]="10"
            hint="Filtro aplicável apenas aos tipos de pedido AUTORIZAÇÃO PRÉVIA"
            size="large"
          ></asc-input-text>
        </div>

        <div class="col-md-3">
          <asc-input-text
            [control]="formulario.get('autorizacaoReembolso')"
            inputId="autorizacaoReembolso"
            label="PEG"
            [maxlength]="20"
            hint="Filtro aplicável apenas aos tipos de pedido REEMBOLSO"
            size="large"
          ></asc-input-text>
        </div>
      </div>

      <div class="row">
        <div class="col-md-3">
          <asc-input-date
            [control]="formulario.get('dataAberturaInicio')"
            inputId="dataAberturaInicio"
            label="Período de Abertura - Início"
            size="large"
          >
          </asc-input-date>
        </div>
        <div class="col-md-3">
          <asc-input-date
            [control]="formulario.get('dataAberturaFim')"
            inputId="dataAberturaFim"
            label="Período de Abertura - Fim"
            size="large"
          >
          </asc-input-date>
        </div>

        <div class="col-md-6">
          <asc-multiSelect
            id="motivosSolicitacao"
            label="Motivo da Solicitação"
            [options]="listaMotivoSolicitacao"
            [control]="formulario.get('motivosSolicitacao')"
            [selected]="motivosSolicitacaoSelected"
            size="large"
          >
          </asc-multiSelect>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <asc-multiSelect
            id="tiposPedido"
            label="Grupo de Pedido"
            [options]="listaGrupoTiposPedido"
            [control]="formulario.get('tiposPedido')"
            [selected]="tiposPedidoSelected"
            size="large"
          >
          </asc-multiSelect>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p class="info-search-label">Dados do titular/beneficiário</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <asc-input-text
            [control]="formulario.get('nomeBeneficiario')"
            inputId="nomeBeneficiario"
            label="Nome do beneficiário"
            [uppercase]="true"
            hint="Filtrar pelo nome do beneficiário"
            size="large"
          ></asc-input-text>
        </div>

        <div class="col-md-3">
          <asc-input-text
            [control]="formulario.get('matriculaTitular')"
            inputId="matriculaTitular"
            label="Matrícula do titular"
            hint="Filtrar pela matrícula do titular"
            size="large"
          ></asc-input-text>
        </div>

        <div class="col-md-3">
          <asc-input-text
            [control]="formulario.get('codigoBeneficiario')"
            inputId="codigoBeneficiario"
            label="Código do beneficiário"
            [maxlength]="12"
            hint="Filtrar pelo cartão de identificação do beneficiário"
            size="large"
          ></asc-input-text>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <asc-multiSelect
            id="tipoBeneficiario"
            label="Tipo de beneficiário"
            [options]="listComboTipoBeneficiario"
            [control]="formulario.get('tiposBeneficiario')"
            [selected]="tiposBeneficiarioSelected"
            size="large"
          ></asc-multiSelect>
        </div>

        <div class="col-md-6">
          <asc-dropdown
            formControlName="caraterSolicitacao"
            label="Caráter da solicitação"
            [items]="optionsCaraterSolicitacao"
            [placeholder]="this.bundle('MHSPH')"
            size="large"
          ></asc-dropdown>
        </div>
      </div>

      <div class="row barra-botoes p-0">
        <button
          type="button"
          [disabled]="carregandoConsulta"
          class="btn-cts clean-btn"
          (click)="limparCampos()"
        >
          <em class="fa fa-trash fa-fw"></em>
          Limpar pesquisa
        </button>
        <button
          type="button"
          [disabled]="carregandoConsulta"
          class="btn-cts btn-primary"
          (click)="consultarProcesso()"
        >
          <em class="fa fa-search fa-fw"></em>
          Pesquisar
        </button>
      </div>
    </form>
  </div>
</div>
