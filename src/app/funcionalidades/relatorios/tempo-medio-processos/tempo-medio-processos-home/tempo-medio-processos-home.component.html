<!-- Page Header-->
<div class="container">
  <div class="col-md-12 breadcrumb-header">
    <ul class="breadcrumb">
      <li>
        <span (click)="voltar()" class="voltar"
          ><i class="fa fa-arrow-left" aria-hidden="true"></i>Voltar</span
        >
      </li>
      <a routerLink="/home">Início</a>
      <em class="fa fa-chevron-right"></em>
      Relatórios
      <em class="fa fa-chevron-right"></em>
      Tempo Médio dos Pedidos
    </ul>
  </div>

  <div class="title-type">
    <h1 class="titulo-pagina">Tempo Médio dos Pedidos</h1>
  </div>

  <section class="row">
    <form [formGroup]="formulario" name="form">
      <div class="row pl-0 col-md-12">
        <h4>Dados dos Pedidos</h4>
      </div>

      <div class="row pl-0 col-xs-4">
        <label class="control-label" for="filial">Agrupadora</label>
        <asc-multiSelect
          id="filial"
          [options]="listComboFilial"
          [control]="formulario.get('filiaisProcesso')"
        ></asc-multiSelect>
      </div>

      <div class="row pl-0 col-xs-2">
        <label class="control-label" for="ufA">UF Atendimento</label>
        <asc-dropdown
  [control]="formulario.get('ufAtendimento')"
  [items]="listComboUF"
  [placeholder]="this.bundle('MHSPH')"
  id="ufA"
></asc-dropdown>
      </div>

      <div class="row pl-0 col-xs-6">
        <label class="control-label" for="tipoProcesso">Tipo de Pedido</label>
        <asc-multiSelect
          id="tipoProcesso"
          [options]="listComboTipoProcesso"
          [control]="formulario.get('tiposProcesso')"
        ></asc-multiSelect>
      </div>

      <div class="row pl-0 col-xs-6">
        <label class="control-label" for="situacaoProcesso"
          >Situação do Pedido</label
        >
        <asc-multiSelect
          id="situacaoProcesso"
          [options]="listComboSituacaoProcesso"
          [control]="formulario.get('situacoesProcesso')"
        ></asc-multiSelect>
      </div>
      <div class="row pl-0 col-xs-2">
        <asc-input-date
          [required]="true"
          [control]="formulario.get('dataInicio')"
          label="Data Início"
        ></asc-input-date>
      </div>
      <div class="row pl-0 col-xs-2">
        <asc-input-date
          [required]="true"
          [control]="formulario.get('dataFim')"
          label="Data Fim"
        ></asc-input-date>
      </div>
    </form>

    <div class="col-xs-12 barra-botoes">
      <button
        *ngIf="exibirResultado"
        class="btn clean-btn"
        title="Relatório Analítico"
        (click)="consultarRelatorioAnalitico()"
        [disabled]="loadingAnalitico"
        @fadeInOut
      >
        <span *ngIf="loadingAnalitico">
          <dsc-progress-spinner
            [style]="{ width: '23px', height: '23px' }"
            animationDuration=".5s"
            fill="#EEEEEE"
            strokeWidth="4"
          >
          </dsc-progress-spinner>
        </span>
        <span *ngIf="!loadingAnalitico">
          <span class="fa fa-list-alt fa-fw"></span>Analítico
        </span>
      </button>
      <button
        id="btnLimparCampos"
        class="btn back-btn"
        (click)="limparCampos()"
      >
        <span class="fa fa-trash fa-fw"></span>Limpar Campos
      </button>
      <button
        class="btn continue-btn"
        (click)="consultarProcesso()"
        [disabled]="!formulario.valid"
      >
        <span class="fa fa-search fa-fw"></span>Pesquisar
      </button>
    </div>
    <div
      *ngIf="exibirResultado"
      class="row pl-0 col-md-12"
      style="overflow-x: auto"
    >
      <p-table
        [value]="listaProcessos"
        [paginator]="true"
        [rows]="rowCounter"
        [rowsPerPageOptions]="[5, 10, 20]"
        [totalRecords]="listaProcessos.length"
        (onPage)="paginacaoMudou($event)"
        class="table table-striped table-sm table-hover"
      >
        <ng-template pTemplate="header">
          <tr>
            <th
              id="competencia"
              style="width: 60px"
              pSortableColumn="competencia"
            >
              Competência
            </th>
            <th
              id="siglaFilial"
              style="width: 30px"
              pSortableColumn="siglaFilial"
            >
              Agrupadora
            </th>
            <th
              id="ufAtendimento"
              style="width: 65px"
              pSortableColumn="ufAtendimento"
            >
              UF Atendimento
            </th>
            <th
              id="tipoProcesso"
              style="width: 98px"
              pSortableColumn="tipoProcesso"
            >
              Tipo de Pedido
            </th>
            <th
              id="tempoMedio"
              style="width: 60px"
              pSortableColumn="tempoMedio"
            >
              Tempo Médio
            </th>
            <th
              id="quantidadeTotal"
              style="width: 60px"
              pSortableColumn="quantidadeTotal"
            >
              Qtd. Total
            </th>
            <th
              id="quantidadeAtraso"
              style="width: 60px"
              pSortableColumn="quantidadeAtraso"
            >
              Qtd. Atraso
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData>
          <tr>
            <td>{{ rowData.competencia }}</td>
            <td>{{ rowData.siglaFilial }}</td>
            <td>{{ rowData.ufAtendimento }}</td>
            <td>{{ rowData.tipoProcesso }}</td>
            <td>{{ rowData.tempoMedio }}</td>
            <td>{{ rowData.quantidadeTotal }}</td>
            <td>{{ rowData.quantidadeAtraso }}</td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          {{ bundle("MA003") }}
        </ng-template>
        <!-- <p-column
          field="competencia" header="Competência" [sortable]="true"
          [style]="{width: '60px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="siglaFilial" header="Agrupadora" [sortable]="true"
          [style]="{width: '30px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="ufAtendimento" header="UF Atendimento" [sortable]="true"
          [style]="{width: '65px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="tipoProcesso" header="Tipo de Pedido" [sortable]="true"
          [style]="{width: '98px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="tempoMedio" header="Tempo Médio" [sortable]="true"
          [style]="{width: '60px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="quantidadeTotal" header="Qtd. Total" [sortable]="true"
          [style]="{width: '60px', 'text-align': 'center', color: '#555555'}"
        ></p-column>
        <p-column
          field="quantidadeAtraso" header="Qtd. Atraso" [sortable]="true"
          [style]="{width: '60px', 'text-align': 'center', color: '#555555'}"
        ></p-column> -->
        <p-footer>
          {{ mensagemPaginacao }}
        </p-footer>
      </p-table>
    </div>
  </section>
</div>
