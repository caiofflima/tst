import { NgClass, NgIf } from '@angular/common';
import { Component, ElementRef, Input, Optional, Self, ViewChild, ViewEncapsulation } from '@angular/core';
import { FormsModule, ReactiveFormsModule } from '@angular/forms';
import { MatInputModule } from '@angular/material/input';
import { MAT_FORM_FIELD_DEFAULT_OPTIONS, MatFormFieldModule } from '@angular/material/form-field';
import { MatIconModule } from '@angular/material/icon';
import { MatTooltipModule } from '@angular/material/tooltip';
import { MatButtonModule } from '@angular/material/button';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { A11yModule } from '@angular/cdk/a11y';
import { acceptValidator, BaseComponent, formatDataStorageUnits, isNotEmptyArray, maxTotalFileSizeValidator } from 'sidsc-components/core';
import { DscButtonComponent } from 'sidsc-components/dsc-button';
import { DscTooltipModule } from 'sidsc-components/dsc-tooltip';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/material/form-field";
import * as i3 from "@angular/material/input";
import * as i4 from "@angular/material/icon";
import * as i5 from "sidsc-components/dsc-tooltip";
import * as i6 from "@angular/cdk/a11y";
export class DscInputFileComponent extends BaseComponent {
    get showTotalFileSize() {
        return this._showTotalFileSize;
    }
    set showTotalFileSize(value) {
        this._showTotalFileSize = coerceBooleanProperty(value);
    }
    get multiple() {
        return this._multiple;
    }
    set multiple(value) {
        this._multiple = coerceBooleanProperty(value);
    }
    get maxTotalSize() {
        return this._maxTotalSize;
    }
    set maxTotalSize(value) {
        const length = typeof value === 'string' ? parseInt(value) : value;
        if (!isNaN(length) && Number.isInteger(length))
            this._maxTotalSize = length;
    }
    constructor(ngControl, parentForm, parentFormGroup, _renderer) {
        super(ngControl, parentForm, parentFormGroup);
        this.ngControl = ngControl;
        this._renderer = _renderer;
        this._showTotalFileSize = false;
        this.isActive = false;
        this._multiple = false;
        this._maxTotalSize = NaN;
        this.totalFileSize = '0 bytes';
        if (this.ngControl)
            this.ngControl.valueAccessor = this;
    }
    ngOnInit() {
        this.updateOn = this.ngControl?.control?.updateOn;
        this._setMultipleAttribute();
        this._setAcceptAttribute();
        this._initValidators();
    }
    _setMultipleAttribute() {
        this._multiple
            ? this._renderer.setAttribute(this.inputFile.nativeElement, 'multiple', '')
            : this._renderer.removeAttribute(this.inputFile.nativeElement, 'multiple');
    }
    _setAcceptAttribute() {
        if (this.accept) {
            const values = this.accept.replace(/\s/g, '').split(',');
            if (isNotEmptyArray(values)) {
                this._renderer.setAttribute(this.inputFile.nativeElement, 'accept', values.join());
            }
            else {
                this._removeAcceptAttribute();
            }
        }
        else {
            this._removeAcceptAttribute();
        }
    }
    _removeAcceptAttribute() {
        this._renderer.removeAttribute(this.inputFile.nativeElement, 'accept');
    }
    _initValidators() {
        if (this.ngControl) {
            const control = this.ngControl.control;
            control?.addValidators(this._getValidators());
            control?.updateValueAndValidity();
        }
    }
    _getValidators() {
        return [acceptValidator(this.accept), maxTotalFileSizeValidator(this._maxTotalSize)];
    }
    writeValue(value) {
        if (!value) {
            this.fileName = undefined;
            this.totalFileSize = '0 bytes';
        }
        this.val = value;
    }
    onClick($event) {
        $event.stopPropagation();
        if (!this.disabled)
            this.inputFile.nativeElement.click();
    }
    onInputChange($event) {
        const input = $event.target;
        let value;
        let numberOfBytes = 0;
        this.showTotalFileSize = '0 bytes';
        this.fileName = '';
        if (input && input.files && input.files.length > 0) {
            if (this.multiple) {
                const files = (value = Array.from(input.files));
                this.fileName = files.map(({ name }) => name).join(', ');
                numberOfBytes = files.map(({ size }) => size).reduce((sum, current) => sum + current, 0);
            }
            else {
                const file = (value = input.files[0]);
                this.fileName = file.name;
                numberOfBytes = file.size;
            }
            this.totalFileSize = formatDataStorageUnits(numberOfBytes);
        }
        this.writeValue(value);
    }
    get formFieldClasses() {
        return [
            this.ngControl && this.ngControl.value?.length
                ? 'mat-mdc-form-field--filled'
                : 'mat-mdc-form-field--empty',
            this.readOnly ? 'mat-mdc-form-field--readonly' : '',
            this.ngControl &&
                this.ngControl.invalid &&
                (this.ngControl.touched || this.ngControl.dirty) &&
                !this.readOnly
                ? 'error-field'
                : '',
            this.isActive || (this.ngControl && this.ngControl.value?.length)
                ? 'active-field'
                : ''
        ].filter(Boolean);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DscInputFileComponent, deps: [{ token: i1.NgControl, optional: true, self: true }, { token: i1.NgForm, optional: true }, { token: i1.FormGroupDirective, optional: true }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: DscInputFileComponent, isStandalone: true, selector: "dsc-input-file", inputs: { showTotalFileSize: "showTotalFileSize", multiple: "multiple", maxTotalSize: "maxTotalSize", accept: "accept" }, providers: [
            { provide: MAT_FORM_FIELD_DEFAULT_OPTIONS, useValue: { appearance: 'outline' } }
        ], viewQueries: [{ propertyName: "inputFile", first: true, predicate: ["inputFile"], descendants: true, read: ElementRef, static: true }], usesInheritance: true, ngImport: i0, template: "<mat-label class=\"mat-label\"\n           [class]=\"formFieldLabelSize\"\n           [ngClass]=\"{\n           'error-label': this.ngControl &&\n           (this.ngControl.invalid && (ngControl.touched || ngControl.dirty)) &&\n           !readOnly\n           }\">\n  {{ label }}\n  <span *ngIf=\"labelHint\"\n        class=\"mat-label__hint\">{{ labelHint }}</span>\n  <mat-icon *ngIf=\"labelHintTooltip\"\n            [ngClass]=\"{'disabled-tooltip': disabled, 'readonly-tooltip': readOnly}\"\n            [dscTooltip]=\"labelHintTooltip\"\n            [dscTooltipDisabled]=\"disabled || readOnly\"\n            dscTooltipVariant='highlight'\n            dscTooltipPosition=\"right\">\n    info_outline\n  </mat-icon>\n</mat-label>\n<mat-form-field cdkMonitorSubtreeFocus\n                [hintLabel]=\"formFieldHint\"\n                [class]=\"formFieldSize\"\n                [ngClass]=\"formFieldClasses\">\n  <input matInput\n         [readonly]=\"true\"\n         [placeholder]=\"placeholder\"\n         [errorStateMatcher]=\"matcher\"\n         [disabled]=\"disabled\"\n         [maxlength]=\"maxlength\"\n         [(ngModel)]=\"fileName\"\n         (focus)=\"isActive = true\"\n         (blur)=\"emitValueOn();blur.emit($event)\">\n  <mat-hint *ngIf=\"showTotalFileSize\"\n            align=\"end\">\n    {{ totalFileSize }}\n  </mat-hint>\n  <mat-error *ngIf='!readOnly'>\n    <mat-icon inline=\"true\">warning</mat-icon>\n    {{ errorText }}\n  </mat-error>\n  <div class=\"mat-mdc-form-field-button-control\">\n    <dsc-button label=\"Carregar\"\n                variant=\"auxiliary\"\n                [size]=\"size\"\n                [disabled]=\"disabled || readOnly\"\n                (click)=\"onClick($event)\">\n    </dsc-button>\n  </div>\n</mat-form-field>\n\n<input hidden\n       type=\"file\"\n       tabindex=\"-1\"\n       (change)=\"onInputChange($event)\"\n       #inputFile>\n", styles: ["dsc-input-file .mat-label{display:flex;gap:var(--dsc-spacing-nano);margin-bottom:var(--dsc-spacing-quark);color:var(--dsc-color-content-neutral-5)}dsc-input-file .mat-label__hint{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-label .mat-icon{font-size:var(--dsc-icon-size-small);height:var(--dsc-icon-size-small);width:var(--dsc-icon-size-small);color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-label--small{font:var(--dsc-typography-text-small-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--small .mat-label__hint{font:var(--dsc-typography-text-small-400)}dsc-input-file .mat-label--standard{font:var(--dsc-typography-text-standard-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--standard .mat-label__hint{font:var(--dsc-typography-text-standard-400)}dsc-input-file .mat-label--large{font:var(--dsc-typography-text-large-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--large .mat-label__hint{font:var(--dsc-typography-text-large-400)}dsc-input-file .mat-mdc-form-field{display:flex;flex-direction:column;width:100%}dsc-input-file .mat-mdc-form-field--large .mdc-text-field{height:54px}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:54px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-large-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:54px}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:54px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field{height:46px}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:46px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-standard-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:46px}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:46px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field--small .mdc-text-field{height:38px}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:38px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-small-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:38px}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:38px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field.cdk-keyboard-focused .mdc-text-field{outline:var(--dsc-border-width-thick) solid var(--dsc-color-state-border-focus-dark);outline-offset:-4px;border-radius:var(--dsc-border-radius-nano)!important}dsc-input-file .mat-mdc-form-field .cdk-text-field-autofilled{height:100%!important;position:fixed!important;z-index:-1!important}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field{border-color:var(--dsc-color-bg-neutral-6)}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-input-element{color:var(--dsc-color-content-neutral-5)}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow,dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-content-neutral-7)}dsc-input-file .mat-mdc-form-field--readonly{pointer-events:none!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field{background-color:var(--dsc-color-state-bg-readonly-1)!important;border-color:var(--dsc-color-state-border-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-input-element{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-icon{color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{pointer-events:none!important;color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-infix{padding:0;min-height:unset}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element::placeholder{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field{border:var(--dsc-border-width-hairline) solid var(--dsc-color-bg-neutral-4);background-color:var(--dsc-color-bg-neutral-1);border-radius:var(--dsc-border-radius-nano);padding:0}dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__leading,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__notch,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__trailing{border:none!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__leading:focus,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__notch:focus,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__trailing:focus{border:none!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix{padding:0;min-height:unset}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element::placeholder{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow-wrapper{height:var(--dsc-icon-size-medium);padding:var(--dsc-spacing-nano)!important;margin-right:var(--dsc-spacing-nano)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix input::-ms-reveal{display:none}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix{display:flex;align-items:center;justify-content:center;padding:0;margin-left:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-icon{padding:0;color:var(--dsc-color-bg-neutral-6)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix button .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix button .mat-icon{color:var(--dsc-color-bg-neutral-7)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mdc-icon-button{display:flex;align-items:center;justify-content:center;padding:0}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled{border-color:var(--dsc-color-state-border-disabled-1);background-color:var(--dsc-color-state-bg-disabled-2)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-input-element::placeholder{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-input-element{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-state-bg-disabled-5)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-prefix .mat-icon{color:var(--dsc-color-state-bg-disabled-5)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{color:var(--dsc-color-state-bg-disabled-5)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled):not(.mdc-text-field--invalid):hover{border-color:var(--dsc-color-border-highlight-1)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled):not(.mdc-text-field--invalid):active{border-color:var(--dsc-color-border-neutral-6)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled).mdc-text-field--invalid.mat-mdc-form-field--readonly{border-color:var(--dsc-color-border-danger-1)!important;border-radius:var(--dsc-border-radius-nano)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled).mdc-text-field--invalid.mat-mdc-form-field--readonly .mat-mdc-select .mat-mdc-select-arrow{color:var(--dsc-color-bg-neutral-5)}dsc-input-file .mat-mdc-form-field-hint-wrapper,dsc-input-file .mat-mdc-form-field-error-wrapper{font:var(--dsc-typography-text-small-400);font-feature-settings:\"ss01\";padding:var(--dsc-spacing-quark) 0 0 0!important}dsc-input-file .mat-mdc-form-field-error-wrapper{border-radius:var(--dsc-border-radius-nano)}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error{display:flex;gap:var(--dsc-spacing-nano);color:var(--dsc-color-content-danger-2);min-height:20px;align-items:center}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error .mat-label{color:var(--dsc-color-content-danger-2)}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error .mat-icon{color:var(--dsc-color-bg-danger-4);min-height:var(--dsc-icon-size-nano);min-width:var(--dsc-icon-size-nano);font-size:var(--dsc-icon-size-nano);align-self:baseline}dsc-input-file .mat-mdc-form-field-hint-wrapper .mat-mdc-form-field-hint{color:var(--dsc-color-content-neutral-3)}.error-label{font:var(--dsc-typography-text-standard-600);font-feature-settings:\"ss01\";color:var(--dsc-color-content-danger-2)!important}.error-field .mdc-text-field{border-color:var(--dsc-color-content-danger-2)!important}.active-field .mdc-text-field{border-color:var(--dsc-color-border-neutral-6)!important}.disabled-tooltip{color:var(--dsc-color-state-bg-disabled-5)!important}.readonly-tooltip{color:var(--dsc-color-state-bg-readonly-2)!important}\n"], dependencies: [{ kind: "directive", type: NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { kind: "directive", type: i1.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: MatFormFieldModule }, { kind: "component", type: i2.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i2.MatLabel, selector: "mat-label" }, { kind: "directive", type: i2.MatHint, selector: "mat-hint", inputs: ["align", "id"] }, { kind: "directive", type: i2.MatError, selector: "mat-error, [matError]", inputs: ["id"] }, { kind: "ngmodule", type: MatInputModule }, { kind: "directive", type: i3.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "ngmodule", type: MatIconModule }, { kind: "component", type: i4.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "ngmodule", type: MatTooltipModule }, { kind: "ngmodule", type: DscTooltipModule }, { kind: "directive", type: i5.DscTooltipDirective, selector: "[dscTooltip]", inputs: ["dscTooltipPosition", "dscTooltipVariant", "dscTooltipPositionAtOrigin", "dscTooltipDisabled", "dscTooltipShowDelay", "dscTooltipHideDelay", "dscTooltip"] }, { kind: "ngmodule", type: MatButtonModule }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "component", type: DscButtonComponent, selector: "dsc-button", inputs: ["type", "label", "iconSuffix", "iconPrefix", "icon", "tabIndex", "dscTooltip", "ariaLabel", "iconStyle", "variant", "size", "disabled", "iconButton"] }, { kind: "ngmodule", type: A11yModule }, { kind: "directive", type: i6.CdkMonitorFocus, selector: "[cdkMonitorElementFocus], [cdkMonitorSubtreeFocus]", outputs: ["cdkFocusChange"], exportAs: ["cdkMonitorFocus"] }], encapsulation: i0.ViewEncapsulation.None }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DscInputFileComponent, decorators: [{
            type: Component,
            args: [{ selector: 'dsc-input-file', standalone: true, encapsulation: ViewEncapsulation.None, imports: [
                        NgIf,
                        NgClass,
                        FormsModule,
                        MatFormFieldModule,
                        MatInputModule,
                        MatIconModule,
                        MatTooltipModule,
                        DscTooltipModule,
                        MatButtonModule,
                        ReactiveFormsModule,
                        DscButtonComponent,
                        A11yModule
                    ], providers: [
                        { provide: MAT_FORM_FIELD_DEFAULT_OPTIONS, useValue: { appearance: 'outline' } }
                    ], template: "<mat-label class=\"mat-label\"\n           [class]=\"formFieldLabelSize\"\n           [ngClass]=\"{\n           'error-label': this.ngControl &&\n           (this.ngControl.invalid && (ngControl.touched || ngControl.dirty)) &&\n           !readOnly\n           }\">\n  {{ label }}\n  <span *ngIf=\"labelHint\"\n        class=\"mat-label__hint\">{{ labelHint }}</span>\n  <mat-icon *ngIf=\"labelHintTooltip\"\n            [ngClass]=\"{'disabled-tooltip': disabled, 'readonly-tooltip': readOnly}\"\n            [dscTooltip]=\"labelHintTooltip\"\n            [dscTooltipDisabled]=\"disabled || readOnly\"\n            dscTooltipVariant='highlight'\n            dscTooltipPosition=\"right\">\n    info_outline\n  </mat-icon>\n</mat-label>\n<mat-form-field cdkMonitorSubtreeFocus\n                [hintLabel]=\"formFieldHint\"\n                [class]=\"formFieldSize\"\n                [ngClass]=\"formFieldClasses\">\n  <input matInput\n         [readonly]=\"true\"\n         [placeholder]=\"placeholder\"\n         [errorStateMatcher]=\"matcher\"\n         [disabled]=\"disabled\"\n         [maxlength]=\"maxlength\"\n         [(ngModel)]=\"fileName\"\n         (focus)=\"isActive = true\"\n         (blur)=\"emitValueOn();blur.emit($event)\">\n  <mat-hint *ngIf=\"showTotalFileSize\"\n            align=\"end\">\n    {{ totalFileSize }}\n  </mat-hint>\n  <mat-error *ngIf='!readOnly'>\n    <mat-icon inline=\"true\">warning</mat-icon>\n    {{ errorText }}\n  </mat-error>\n  <div class=\"mat-mdc-form-field-button-control\">\n    <dsc-button label=\"Carregar\"\n                variant=\"auxiliary\"\n                [size]=\"size\"\n                [disabled]=\"disabled || readOnly\"\n                (click)=\"onClick($event)\">\n    </dsc-button>\n  </div>\n</mat-form-field>\n\n<input hidden\n       type=\"file\"\n       tabindex=\"-1\"\n       (change)=\"onInputChange($event)\"\n       #inputFile>\n", styles: ["dsc-input-file .mat-label{display:flex;gap:var(--dsc-spacing-nano);margin-bottom:var(--dsc-spacing-quark);color:var(--dsc-color-content-neutral-5)}dsc-input-file .mat-label__hint{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-label .mat-icon{font-size:var(--dsc-icon-size-small);height:var(--dsc-icon-size-small);width:var(--dsc-icon-size-small);color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-label--small{font:var(--dsc-typography-text-small-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--small .mat-label__hint{font:var(--dsc-typography-text-small-400)}dsc-input-file .mat-label--standard{font:var(--dsc-typography-text-standard-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--standard .mat-label__hint{font:var(--dsc-typography-text-standard-400)}dsc-input-file .mat-label--large{font:var(--dsc-typography-text-large-600);font-feature-settings:\"ss01\"}dsc-input-file .mat-label--large .mat-label__hint{font:var(--dsc-typography-text-large-400)}dsc-input-file .mat-mdc-form-field{display:flex;flex-direction:column;width:100%}dsc-input-file .mat-mdc-form-field--large .mdc-text-field{height:54px}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:54px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-large-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:54px}dsc-input-file .mat-mdc-form-field--large .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:54px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field{height:46px}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:46px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-standard-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:46px}dsc-input-file .mat-mdc-form-field--standard .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:46px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field--small .mdc-text-field{height:38px}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix{display:flex;height:38px;padding:0 0 0 var(--dsc-spacing-nano)!important;gap:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element{font:var(--dsc-typography-text-small-400);font-feature-settings:\"ss01\"}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-input-control{height:38px}dsc-input-file .mat-mdc-form-field--small .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-form-field-button-control{height:38px;padding:2px 2px 2px 0;box-sizing:border-box}dsc-input-file .mat-mdc-form-field.cdk-keyboard-focused .mdc-text-field{outline:var(--dsc-border-width-thick) solid var(--dsc-color-state-border-focus-dark);outline-offset:-4px;border-radius:var(--dsc-border-radius-nano)!important}dsc-input-file .mat-mdc-form-field .cdk-text-field-autofilled{height:100%!important;position:fixed!important;z-index:-1!important}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field{border-color:var(--dsc-color-bg-neutral-6)}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-input-element{color:var(--dsc-color-content-neutral-5)}dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow,dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field--filled .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-content-neutral-7)}dsc-input-file .mat-mdc-form-field--readonly{pointer-events:none!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field{background-color:var(--dsc-color-state-bg-readonly-1)!important;border-color:var(--dsc-color-state-border-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-input-element{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-icon{color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{pointer-events:none!important;color:var(--dsc-color-state-bg-readonly-2)!important}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-infix{padding:0;min-height:unset}dsc-input-file .mat-mdc-form-field--readonly .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element::placeholder{color:var(--dsc-color-state-content-readonly-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field{border:var(--dsc-border-width-hairline) solid var(--dsc-color-bg-neutral-4);background-color:var(--dsc-color-bg-neutral-1);border-radius:var(--dsc-border-radius-nano);padding:0}dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__leading,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__notch,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__trailing{border:none!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__leading:focus,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__notch:focus,dsc-input-file .mat-mdc-form-field .mdc-text-field .mdc-notched-outline__trailing:focus{border:none!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix{padding:0;min-height:unset}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-input-element::placeholder{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow-wrapper{height:var(--dsc-icon-size-medium);padding:var(--dsc-spacing-nano)!important;margin-right:var(--dsc-spacing-nano)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder{color:var(--dsc-color-content-neutral-3)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-infix input::-ms-reveal{display:none}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix{display:flex;align-items:center;justify-content:center;padding:0;margin-left:var(--dsc-spacing-nano)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-icon{padding:0;color:var(--dsc-color-bg-neutral-6)}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix button .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix button .mat-icon{color:var(--dsc-color-bg-neutral-7)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mdc-icon-button{display:flex;align-items:center;justify-content:center;padding:0}dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{color:var(--dsc-color-bg-neutral-7)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled{border-color:var(--dsc-color-state-border-disabled-1);background-color:var(--dsc-color-state-bg-disabled-2)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-input-element::placeholder{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-input-element{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-arrow{color:var(--dsc-color-state-bg-disabled-5)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-placeholder,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-select .mat-mdc-select-trigger .mat-mdc-select-value-text{color:var(--dsc-color-state-content-disabled-1)!important}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-suffix .mat-icon,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-prefix .mat-icon{color:var(--dsc-color-state-bg-disabled-5)}dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-suffix .mat-datepicker-toggle .mdc-icon-button,dsc-input-file .mat-mdc-form-field .mdc-text-field--disabled .mat-mdc-form-field-icon-prefix .mat-datepicker-toggle .mdc-icon-button{color:var(--dsc-color-state-bg-disabled-5)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled):not(.mdc-text-field--invalid):hover{border-color:var(--dsc-color-border-highlight-1)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled):not(.mdc-text-field--invalid):active{border-color:var(--dsc-color-border-neutral-6)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled).mdc-text-field--invalid.mat-mdc-form-field--readonly{border-color:var(--dsc-color-border-danger-1)!important;border-radius:var(--dsc-border-radius-nano)}dsc-input-file .mat-mdc-form-field .mdc-text-field:not(.mdc-text-field--disabled).mdc-text-field--invalid.mat-mdc-form-field--readonly .mat-mdc-select .mat-mdc-select-arrow{color:var(--dsc-color-bg-neutral-5)}dsc-input-file .mat-mdc-form-field-hint-wrapper,dsc-input-file .mat-mdc-form-field-error-wrapper{font:var(--dsc-typography-text-small-400);font-feature-settings:\"ss01\";padding:var(--dsc-spacing-quark) 0 0 0!important}dsc-input-file .mat-mdc-form-field-error-wrapper{border-radius:var(--dsc-border-radius-nano)}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error{display:flex;gap:var(--dsc-spacing-nano);color:var(--dsc-color-content-danger-2);min-height:20px;align-items:center}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error .mat-label{color:var(--dsc-color-content-danger-2)}dsc-input-file .mat-mdc-form-field-error-wrapper .mat-mdc-form-field-error .mat-icon{color:var(--dsc-color-bg-danger-4);min-height:var(--dsc-icon-size-nano);min-width:var(--dsc-icon-size-nano);font-size:var(--dsc-icon-size-nano);align-self:baseline}dsc-input-file .mat-mdc-form-field-hint-wrapper .mat-mdc-form-field-hint{color:var(--dsc-color-content-neutral-3)}.error-label{font:var(--dsc-typography-text-standard-600);font-feature-settings:\"ss01\";color:var(--dsc-color-content-danger-2)!important}.error-field .mdc-text-field{border-color:var(--dsc-color-content-danger-2)!important}.active-field .mdc-text-field{border-color:var(--dsc-color-border-neutral-6)!important}.disabled-tooltip{color:var(--dsc-color-state-bg-disabled-5)!important}.readonly-tooltip{color:var(--dsc-color-state-bg-readonly-2)!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.NgControl, decorators: [{
                    type: Optional
                }, {
                    type: Self
                }] }, { type: i1.NgForm, decorators: [{
                    type: Optional
                }] }, { type: i1.FormGroupDirective, decorators: [{
                    type: Optional
                }] }, { type: i0.Renderer2 }]; }, propDecorators: { inputFile: [{
                type: ViewChild,
                args: ['inputFile', { static: true, read: ElementRef }]
            }], showTotalFileSize: [{
                type: Input
            }], multiple: [{
                type: Input
            }], maxTotalSize: [{
                type: Input
            }], accept: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHNjLWlucHV0LWZpbGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvc2lkc2MtY29tcG9uZW50cy9kc2MtaW5wdXQtZmlsZS9kc2MtaW5wdXQtZmlsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zaWRzYy1jb21wb25lbnRzL2RzYy1pbnB1dC1maWxlL2RzYy1pbnB1dC1maWxlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUNMLFNBQVMsRUFDVCxVQUFVLEVBQ1YsS0FBSyxFQUVMLFFBQVEsRUFFUixJQUFJLEVBQ0osU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQXNCLFdBQVcsRUFBcUIsbUJBQW1CLEVBQWUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN0SCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDekQsT0FBTyxFQUFFLDhCQUE4QixFQUFFLGtCQUFrQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDbEcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzdELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFFL0MsT0FBTyxFQUNMLGVBQWUsRUFDZixhQUFhLEVBQ2Isc0JBQXNCLEVBQ3RCLGVBQWUsRUFDZix5QkFBeUIsRUFDMUIsTUFBTSx1QkFBdUIsQ0FBQztBQUMvQixPQUFP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LElBQUksaUJBQ0QsaUJBQWlCLENBQUMsSUFBSSxXQUc1Qjt3QkFDUCxJQUFJO3dCQUNKLE9BQU87d0JBQ1AsV0FBVzt3QkFDWCxrQkFBa0I7d0JBQ2xCLGNBQWM7d0JBQ2QsYUFBYTt3QkFDYixnQkFBZ0I7d0JBQ2hCLGdCQUFnQjt3QkFDaEIsZUFBZTt3QkFDZixtQkFBbUI7d0JBQ25CLGtCQUFrQjt3QkFDbEIsVUFBVTtxQkFDWCxhQUNVO3dCQUNULEVBQUUsT0FBTyxFQUFFLDhCQUE4QixFQUFFLFFBQVEsRUFBRSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsRUFBRTtxQkFDakY7OzBCQStDWSxRQUFROzswQkFBSSxJQUFJOzswQkFDaEIsUUFBUTs7MEJBQ1IsUUFBUTtvRUE3Q3JCLFNBQVM7c0JBRFIsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUU7Z0JBSXRELGlCQUFpQjtzQkFEcEIsS0FBSztnQkFjRixRQUFRO3NCQURYLEtBQUs7Z0JBWUYsWUFBWTtzQkFEZixLQUFLO2dCQVlOLE1BQU07c0JBREwsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nQ2xhc3MsIE5nSWYgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgUmVuZGVyZXIyLFxuICBTZWxmLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdFbmNhcHN1bGF0aW9uXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwRGlyZWN0aXZlLCBGb3Jtc01vZHVsZSwgTmdDb250cm9sLCBOZ0Zvcm0sIFJlYWN0aXZlRm9ybXNNb2R1bGUsIFZhbGlkYXRvckZuIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0SW5wdXRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pbnB1dCc7XG5pbXBvcnQgeyBNQVRfRk9STV9GSUVMRF9ERUZBVUxUX09QVElPTlMsIE1hdEZvcm1GaWVsZE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2Zvcm0tZmllbGQnO1xuaW1wb3J0IHsgTWF0SWNvbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2ljb24nO1xuaW1wb3J0IHsgTWF0VG9vbHRpcE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Rvb2x0aXAnO1xuaW1wb3J0IHsgTWF0QnV0dG9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYnV0dG9uJztcbmltcG9ydCB7IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyBBMTF5TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuXG5pbXBvcnQge1xuICBhY2NlcHRWYWxpZGF0b3IsXG4gIEJhc2VDb21wb25lbnQsXG4gIGZvcm1hdERhdGFTdG9yYWdlVW5pdHMsXG4gIGlzTm90RW1wdHlBcnJheSxcbiAgbWF4VG90YWxGaWxlU2l6ZVZhbGlkYXRvclxufSBmcm9tICdzaWRzYy1jb21wb25lbnRzL2NvcmUnO1xuaW1wb3J0IHsgRHNjQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnc2lkc2MtY29tcG9uZW50cy9kc2MtYnV0dG9uJztcbmltcG9ydCB7IERzY1Rvb2x0aXBNb2R1bGUgfSBmcm9tICdzaWRzYy1jb21wb25lbnRzL2RzYy10b29sdGlwJztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdkc2MtaW5wdXQtZmlsZScsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIHRlbXBsYXRlVXJsOiAnLi9kc2MtaW5wdXQtZmlsZS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2RzYy1pbnB1dC1maWxlLmNvbXBvbmVudC5zY3NzJ10sXG4gIGltcG9ydHM6IFtcbiAgICBOZ0lmLFxuICAgIE5nQ2xhc3MsXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgTWF0Rm9ybUZpZWxkTW9kdWxlLFxuICAgIE1hdElucHV0TW9kdWxlLFxuICAgIE1hdEljb25Nb2R1bGUsXG4gICAgTWF0VG9vbHRpcE1vZHVsZSxcbiAgICBEc2NUb29sdGlwTW9kdWxlLFxuICAgIE1hdEJ1dHRvbk1vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICAgIERzY0J1dHRvbkNvbXBvbmVudCxcbiAgICBBMTF5TW9kdWxlXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIHsgcHJvdmlkZTogTUFUX0ZPUk1fRklFTERfREVGQVVMVF9PUFRJT05TLCB1c2VWYWx1ZTogeyBhcHBlYXJhbmNlOiAnb3V0bGluZScgfSB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgRHNjSW5wdXRGaWxlQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbXBvbmVudDxhbnk+IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQFZpZXdDaGlsZCgnaW5wdXRGaWxlJywgeyBzdGF0aWM6IHRydWUsIHJlYWQ6IEVsZW1lbnRSZWYgfSlcbiAgaW5wdXRGaWxlITogRWxlbWVudFJlZjtcblxuICBASW5wdXQoKVxuICBnZXQgc2hvd1RvdGFsRmlsZVNpemUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3Nob3dUb3RhbEZpbGVTaXplO1xuICB9XG5cbiAgc2V0IHNob3dUb3RhbEZpbGVTaXplKHZhbHVlOiBib29sZWFuIHwgc3RyaW5nKSB7XG4gICAgdGhpcy5fc2hvd1RvdGFsRmlsZVNpemUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2hvd1RvdGFsRmlsZVNpemUgPSBmYWxzZTtcblxuICBpc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGdldCBtdWx0aXBsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fbXVsdGlwbGU7XG4gIH1cblxuICBzZXQgbXVsdGlwbGUodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLl9tdWx0aXBsZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9tdWx0aXBsZSA9IGZhbHNlO1xuXG4gIEBJbnB1dCgpXG4gIGdldCBtYXhUb3RhbFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4VG90YWxTaXplO1xuICB9XG4gIHNldCBtYXhUb3RhbFNpemUodmFsdWU6IG51bWJlciB8IHN0cmluZykge1xuICAgIGNvbnN0IGxlbmd0aCA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBwYXJzZUludCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICBpZiAoIWlzTmFOKGxlbmd0aCkgJiYgTnVtYmVyLmlzSW50ZWdlcihsZW5ndGgpKSB0aGlzLl9tYXhUb3RhbFNpemUgPSBsZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIF9tYXhUb3RhbFNpemU6IG51bWJlciA9IE5hTjtcblxuICBASW5wdXQoKVxuICBhY2NlcHQ/OiBzdHJpbmc7XG5cbiAgdG90YWxGaWxlU2l6ZSA9ICcwIGJ5dGVzJztcblxuICBmaWxlTmFtZT86IHN0cmluZztcbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNlbGYoKSBwdWJsaWMgbmdDb250cm9sOiBOZ0NvbnRyb2wsXG4gICAgICAgICAgICAgIEBPcHRpb25hbCgpIHBhcmVudEZvcm06IE5nRm9ybSxcbiAgICAgICAgICAgICAgQE9wdGlvbmFsKCkgcGFyZW50Rm9ybUdyb3VwOiBGb3JtR3JvdXBEaXJlY3RpdmUsXG4gICAgICAgICAgICAgIHByaXZhdGUgX3JlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7XG4gICAgc3VwZXIobmdDb250cm9sLCBwYXJlbnRGb3JtLCBwYXJlbnRGb3JtR3JvdXApO1xuICAgIGlmICh0aGlzLm5nQ29udHJvbCkgdGhpcy5uZ0NvbnRyb2wudmFsdWVBY2Nlc3NvciA9IHRoaXM7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZU9uID0gdGhpcy5uZ0NvbnRyb2w/LmNvbnRyb2w/LnVwZGF0ZU9uO1xuICAgIHRoaXMuX3NldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgdGhpcy5fc2V0QWNjZXB0QXR0cmlidXRlKCk7XG4gICAgdGhpcy5faW5pdFZhbGlkYXRvcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldE11bHRpcGxlQXR0cmlidXRlKCkge1xuICAgIHRoaXMuX211bHRpcGxlXG4gICAgICA/IHRoaXMuX3JlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmlucHV0RmlsZS5uYXRpdmVFbGVtZW50LCAnbXVsdGlwbGUnLCAnJylcbiAgICAgIDogdGhpcy5fcmVuZGVyZXIucmVtb3ZlQXR0cmlidXRlKHRoaXMuaW5wdXRGaWxlLm5hdGl2ZUVsZW1lbnQsICdtdWx0aXBsZScpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0QWNjZXB0QXR0cmlidXRlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFjY2VwdCkge1xuICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5hY2NlcHQucmVwbGFjZSgvXFxzL2csICcnKS5zcGxpdCgnLCcpO1xuICAgICAgaWYgKGlzTm90RW1wdHlBcnJheSh2YWx1ZXMpKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnNldEF0dHJpYnV0ZSh0aGlzLmlucHV0RmlsZS5uYXRpdmVFbGVtZW50LCAnYWNjZXB0JywgdmFsdWVzLmpvaW4oKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZW1vdmVBY2NlcHRBdHRyaWJ1dGUoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVtb3ZlQWNjZXB0QXR0cmlidXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVtb3ZlQWNjZXB0QXR0cmlidXRlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmlucHV0RmlsZS5uYXRpdmVFbGVtZW50LCAnYWNjZXB0Jyk7XG4gIH1cblxuICBwcml2YXRlIF9pbml0VmFsaWRhdG9ycygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5uZ0NvbnRyb2wpIHtcbiAgICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLm5nQ29udHJvbC5jb250cm9sO1xuICAgICAgY29udHJvbD8uYWRkVmFsaWRhdG9ycyh0aGlzLl9nZXRWYWxpZGF0b3JzKCkpO1xuICAgICAgY29udHJvbD8udXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldFZhbGlkYXRvcnMoKTogVmFsaWRhdG9yRm5bXSB7XG4gICAgcmV0dXJuIFthY2NlcHRWYWxpZGF0b3IodGhpcy5hY2NlcHQpLCBtYXhUb3RhbEZpbGVTaXplVmFsaWRhdG9yKHRoaXMuX21heFRvdGFsU2l6ZSldO1xuICB9XG5cbiAgb3ZlcnJpZGUgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5maWxlTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMudG90YWxGaWxlU2l6ZSA9ICcwIGJ5dGVzJztcbiAgICB9XG4gICAgdGhpcy52YWwgPSB2YWx1ZTtcbiAgfVxuXG4gIG9uQ2xpY2soJGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHRoaXMuaW5wdXRGaWxlLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgfVxuXG4gIHB1YmxpYyBvbklucHV0Q2hhbmdlKCRldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBpbnB1dCA9ICRldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBsZXQgdmFsdWU6IGFueTtcbiAgICBsZXQgbnVtYmVyT2ZCeXRlcyA9IDA7XG4gICAgdGhpcy5zaG93VG90YWxGaWxlU2l6ZSA9ICcwIGJ5dGVzJztcbiAgICB0aGlzLmZpbGVOYW1lID0gJyc7XG5cbiAgICBpZiAoaW5wdXQgJiYgaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgY29uc3QgZmlsZXM6IEZpbGVbXSA9ICh2YWx1ZSA9IEFycmF5LmZyb20oaW5wdXQuZmlsZXMpKTtcbiAgICAgICAgdGhpcy5maWxlTmFtZSA9IGZpbGVzLm1hcCgoeyBuYW1lIH0pID0+IG5hbWUpLmpvaW4oJywgJyk7XG4gICAgICAgIG51bWJlck9mQnl0ZXMgPSBmaWxlcy5tYXAoKHsgc2l6ZSB9KSA9PiBzaXplKS5yZWR1Y2UoKHN1bSwgY3VycmVudCkgPT4gc3VtICsgY3VycmVudCwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBmaWxlOiBGaWxlID0gKHZhbHVlID0gaW5wdXQuZmlsZXNbMF0pO1xuICAgICAgICB0aGlzLmZpbGVOYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICBudW1iZXJPZkJ5dGVzID0gZmlsZS5zaXplO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRvdGFsRmlsZVNpemUgPSBmb3JtYXREYXRhU3RvcmFnZVVuaXRzKG51bWJlck9mQnl0ZXMpO1xuICAgIH1cblxuICAgIHRoaXMud3JpdGVWYWx1ZSh2YWx1ZSk7XG4gIH1cblxuICBnZXQgZm9ybUZpZWxkQ2xhc3NlcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMubmdDb250cm9sICYmIHRoaXMubmdDb250cm9sLnZhbHVlPy5sZW5ndGhcbiAgICAgICAgPyAnbWF0LW1kYy1mb3JtLWZpZWxkLS1maWxsZWQnXG4gICAgICAgIDogJ21hdC1tZGMtZm9ybS1maWVsZC0tZW1wdHknLFxuICAgICAgdGhpcy5yZWFkT25seSA/ICdtYXQtbWRjLWZvcm0tZmllbGQtLXJlYWRvbmx5JyA6ICcnLFxuICAgICAgdGhpcy5uZ0NvbnRyb2wgJiZcbiAgICAgIHRoaXMubmdDb250cm9sLmludmFsaWQgJiZcbiAgICAgICh0aGlzLm5nQ29udHJvbC50b3VjaGVkIHx8IHRoaXMubmdDb250cm9sLmRpcnR5KSAmJlxuICAgICAgIXRoaXMucmVhZE9ubHlcbiAgICAgICAgPyAnZXJyb3ItZmllbGQnXG4gICAgICAgIDogJycsXG4gICAgICAgIHRoaXMuaXNBY3RpdmUgfHwgKHRoaXMubmdDb250cm9sICYmIHRoaXMubmdDb250cm9sLnZhbHVlPy5sZW5ndGgpXG4gICAgICA/ICdhY3RpdmUtZmllbGQnXG4gICAgICA6ICcnXG4gICAgXS5maWx0ZXIoQm9vbGVhbik7XG4gIH1cbn1cbiIsIjxtYXQtbGFiZWwgY2xhc3M9XCJtYXQtbGFiZWxcIlxuICAgICAgICAgICBbY2xhc3NdPVwiZm9ybUZpZWxkTGFiZWxTaXplXCJcbiAgICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAnZXJyb3ItbGFiZWwnOiB0aGlzLm5nQ29udHJvbCAmJlxuICAgICAgICAgICAodGhpcy5uZ0NvbnRyb2wuaW52YWxpZCAmJiAobmdDb250cm9sLnRvdWNoZWQgfHwgbmdDb250cm9sLmRpcnR5KSkgJiZcbiAgICAgICAgICAgIXJlYWRPbmx5XG4gICAgICAgICAgIH1cIj5cbiAge3sgbGFiZWwgfX1cbiAgPHNwYW4gKm5nSWY9XCJsYWJlbEhpbnRcIlxuICAgICAgICBjbGFzcz1cIm1hdC1sYWJlbF9faGludFwiPnt7IGxhYmVsSGludCB9fTwvc3Bhbj5cbiAgPG1hdC1pY29uICpuZ0lmPVwibGFiZWxIaW50VG9vbHRpcFwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7J2Rpc2FibGVkLXRvb2x0aXAnOiBkaXNhYmxlZCwgJ3JlYWRvbmx5LXRvb2x0aXAnOiByZWFkT25seX1cIlxuICAgICAgICAgICAgW2RzY1Rvb2x0aXBdPVwibGFiZWxIaW50VG9vbHRpcFwiXG4gICAgICAgICAgICBbZHNjVG9vbHRpcERpc2FibGVkXT1cImRpc2FibGVkIHx8IHJlYWRPbmx5XCJcbiAgICAgICAgICAgIGRzY1Rvb2x0aXBWYXJpYW50PSdoaWdobGlnaHQnXG4gICAgICAgICAgICBkc2NUb29sdGlwUG9zaXRpb249XCJyaWdodFwiPlxuICAgIGluZm9fb3V0bGluZVxuICA8L21hdC1pY29uPlxuPC9tYXQtbGFiZWw+XG48bWF0LWZvcm0tZmllbGQgY2RrTW9uaXRvclN1YnRyZWVGb2N1c1xuICAgICAgICAgICAgICAgIFtoaW50TGFiZWxdPVwiZm9ybUZpZWxkSGludFwiXG4gICAgICAgICAgICAgICAgW2NsYXNzXT1cImZvcm1GaWVsZFNpemVcIlxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cImZvcm1GaWVsZENsYXNzZXNcIj5cbiAgPGlucHV0IG1hdElucHV0XG4gICAgICAgICBbcmVhZG9ubHldPVwidHJ1ZVwiXG4gICAgICAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgW2Vycm9yU3RhdGVNYXRjaGVyXT1cIm1hdGNoZXJcIlxuICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgIFttYXhsZW5ndGhdPVwibWF4bGVuZ3RoXCJcbiAgICAgICAgIFsobmdNb2RlbCldPVwiZmlsZU5hbWVcIlxuICAgICAgICAgKGZvY3VzKT1cImlzQWN0aXZlID0gdHJ1ZVwiXG4gICAgICAgICAoYmx1cik9XCJlbWl0VmFsdWVPbigpO2JsdXIuZW1pdCgkZXZlbnQpXCI+XG4gIDxtYXQtaGludCAqbmdJZj1cInNob3dUb3RhbEZpbGVTaXplXCJcbiAgICAgICAgICAgIGFsaWduPVwiZW5kXCI+XG4gICAge3sgdG90YWxGaWxlU2l6ZSB9fVxuICA8L21hdC1oaW50PlxuICA8bWF0LWVycm9yICpuZ0lmPSchcmVhZE9ubHknPlxuICAgIDxtYXQtaWNvbiBpbmxpbmU9XCJ0cnVlXCI+d2FybmluZzwvbWF0LWljb24+XG4gICAge3sgZXJyb3JUZXh0IH19XG4gIDwvbWF0LWVycm9yPlxuICA8ZGl2IGNsYXNzPVwibWF0LW1kYy1mb3JtLWZpZWxkLWJ1dHRvbi1jb250cm9sXCI+XG4gICAgPGRzYy1idXR0b24gbGFiZWw9XCJDYXJyZWdhclwiXG4gICAgICAgICAgICAgICAgdmFyaWFudD1cImF1eGlsaWFyeVwiXG4gICAgICAgICAgICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkIHx8IHJlYWRPbmx5XCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCI+XG4gICAgPC9kc2MtYnV0dG9uPlxuICA8L2Rpdj5cbjwvbWF0LWZvcm0tZmllbGQ+XG5cbjxpbnB1dCBoaWRkZW5cbiAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgKGNoYW5nZSk9XCJvbklucHV0Q2hhbmdlKCRldmVudClcIlxuICAgICAgICNpbnB1dEZpbGU+XG4iXX0=